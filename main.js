(()=>{"use strict";async function e(e){const t=await fetch("http://api.openweathermap.org/geo/1.0/direct?q="+e+"&limit=1&appid=42d9bbce104de377e00f785f9b102383",{mode:"cors"});return await t.json()}async function t(e,t){const n=await fetch("http://api.openweathermap.org/data/2.5/forecast?lat="+e+"&lon="+t+"&appid=42d9bbce104de377e00f785f9b102383&units=metric",{mode:"cors"});return await n.json()}function n(e){const t={temp:Math.round(e.main.temp),weather:e.weather[0].main,humidity:e.main.humidity,wind:e.wind.speed,precip:0,icon:e.weather[0].icon};return void 0!==e.rain&&(t.precip=e.rain["3h"]),t}function o(e){return[e[0],e[8],e[16],e[24],e[32]].map((e=>n(e)))}function r(e){return[e[0],e[1],e[2],e[3],e[4],e[5],e[6],e[7],e[8],e[9],e[10],e[11],e[12],e[13],e[14]].map((e=>n(e)))}function a(e){return Math.round(1.8*e+32)}function c(e){return Math.round((e-32)/1.8)}function l(e){const t=[];for(let n=0;n<15;n++)t.push(e.list[n].dt_txt.slice(10,16));return t}const s=document.getElementById("city-name"),i=document.getElementById("search-form"),d=document.getElementById("search-button"),m=document.getElementById("search-bar"),y=document.getElementById("celsius-converter"),u=document.getElementById("fahrenheit-converter"),p=document.getElementById("degree"),h=document.getElementById("weather-description"),g=document.getElementById("precipitation"),f=document.getElementById("humidity"),E=document.getElementById("wind"),w=document.getElementById("daily"),x=document.getElementById("hourly");let I=document.getElementById("rain"),B=!0,v=!0,b=0;function T(e){s.innerText=e}function S(e){const t=document.getElementById("thunderstorm"),n=document.getElementById("rain"),o=document.getElementById("snow"),r=document.getElementById("clear"),a=document.getElementById("cloud");switch(e){case"Thunderstorm":I.style.opacity=0,t.style.opacity=1,I=t;break;case"Rain":I.style.opacity=0,n.style.opacity=1,I=n;break;case"Snow":I.style.opacity=0,o.style.opacity=1,I=o;break;case"Clear":I.style.opacity=0,r.style.opacity=1,I=r;break;case"Clouds":I.style.opacity=0,a.style.opacity=1,I=a}}function q(e,t,n,o,r,a){p.innerText=e,h.innerText=t,g.innerText=n+"%",f.innerText=o+"%",E.innerText=r,document.getElementById("weather-icon").src="https://openweathermap.org/img/wn/"+a+"@2x.png"}function k(e){const t=function(){const e=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],t=new Date,n=[];for(let o=0;o<5;o++){const r=e[(t.getDay()+o)%7];n.push(r)}return n}(),n=document.createElement("div");n.classList.add("daily-weather-container");for(let o=0;o<5;o++){const r=document.createElement("div");r.classList.add("daily-weather-info");const a=document.createElement("p");a.classList.add("day-hour"),r.appendChild(a),a.innerText=t[o];const c=document.createElement("img");c.classList.add("weather-icon-day-hour"),r.appendChild(c),c.src="https://openweathermap.org/img/wn/"+e[o].icon.slice(0,-1)+"d@2x.png";const l=document.createElement("p"),s=document.createElement("span");s.classList.add("degree-day-hour"),l.appendChild(s),r.appendChild(l),s.innerText=e[o].temp+"째",n.appendChild(r)}document.querySelector(".slide-container").append(n)}function X(e,t){for(let n=0;n<3;n++){const o=document.createElement("div");switch(o.classList.add("hourly-weather-container"),n){case 1:o.style.transform="translate(2000px)";break;case 2:o.style.transform="translateX(4000px)"}for(let r=0;r<5;r++){const a=document.createElement("div");a.classList.add("hourly-weather-info");const c=document.createElement("p");c.classList.add("day-hour"),a.appendChild(c),c.innerText=t[5*n+r];const l=document.createElement("img");l.classList.add("weather-icon-day-hour"),a.appendChild(l),l.src="https://openweathermap.org/img/wn/"+e[5*n+r].icon.slice(0,-1)+"d@2x.png";const s=document.createElement("p"),i=document.createElement("span");i.classList.add("degree-day-hour"),s.appendChild(i),a.appendChild(s),i.innerText=e[5*n+r].temp+"째",o.appendChild(a)}document.querySelector(".slide-container").append(o)}}document.getElementById("slide-left").addEventListener("click",(function(){const e=document.querySelectorAll(".nav-point");e.forEach((e=>e.style.backgroundColor="rgb(208, 208, 208)"));const t=document.querySelectorAll(".hourly-weather-container");switch(b){case 0:t[0].style.transform="translateX(-4000px)",t[1].style.transform="translateX(-2000px)",t[2].style.transform="translateX(0px)",b=2;break;case 1:t[0].style.transform="translateX(0px)",t[1].style.transform="translateX(2000px)",t[2].style.transform="translateX(4000px)",b=0;break;case 2:t[0].style.transform="translateX(-2000px)",t[1].style.transform="translateX(0px)",t[2].style.transform="translateX(2000px)",b=1}e[b].style.backgroundColor="white"})),document.getElementById("slide-right").addEventListener("click",(function(){const e=document.querySelectorAll(".nav-point");e.forEach((e=>e.style.backgroundColor="rgb(208, 208, 208)"));const t=document.querySelectorAll(".hourly-weather-container");switch(b){case 0:t[0].style.transform="translateX(-2000px)",t[1].style.transform="translateX(0px)",t[2].style.transform="translateX(2000px)",b=1;break;case 1:t[0].style.transform="translateX(-4000px)",t[1].style.transform="translateX(-2000px)",t[2].style.transform="translateX(0px)",b=2;break;case 2:t[0].style.transform="translateX(0px)",t[1].style.transform="translateX(2000px)",t[2].style.transform="translateX(4000px)",b=0}e[b].style.backgroundColor="white"})),i.onsubmit=function(){return!1},d.addEventListener("click",(function(){v?document.querySelector(".daily-weather-container").remove():document.querySelectorAll(".hourly-weather-container").forEach((e=>e.remove())),m.setCustomValidity(""),e(m.value).then((e=>{0==e.length?(m.setCustomValidity("Please enter a valid city name"),m.reportValidity()):(document.getElementById("city-name").style.opacity=0,document.querySelector(".slide-container").style.opacity=0,setTimeout((function(){T(e[0].name),document.getElementById("city-name").style.opacity=1,document.querySelector(".slide-container").style.opacity=1,console.log(e),t(e[0].lat,e[0].lon).then((e=>{const t=n(e.list[0]);if(console.log(e),q(t.temp,t.weather,t.precip,t.humidity,t.wind,t.icon),S(t.weather),v)k(o(e.list));else{const t=l(e);X(r(e.list),t)}}))}),1e3))}))})),y.addEventListener("click",(function(){B||(document.querySelectorAll(".degree-day-hour").forEach((e=>e.innerText=c(parseInt(e.innerText))+"째")),y.style.color="white",u.style.color="rgb(208, 208, 208)",p.innerText=c(parseInt(p.innerText)),B=!0)})),u.addEventListener("click",(function(){B&&(document.querySelectorAll(".degree-day-hour").forEach((e=>e.innerText=a(parseInt(e.innerText))+"째")),y.style.color="rgb(208, 208, 208)",u.style.color="white",p.innerText=a(parseInt(p.innerText)),B=!1)})),w.addEventListener("click",(function(){document.querySelectorAll(".hourly-weather-container").forEach((e=>e.remove()));const n=document.getElementById("city-name").innerText;v||(v=!0,document.getElementById("daily").style.color="white",document.getElementById("hourly").style.color="rgb(208, 208, 208)",document.querySelector(".slide-container").style.opacity=0,document.querySelector(".nav-point-container").style.opacity=0,setTimeout((function(){e(n).then((e=>{T(e[0].name),t(e[0].lat,e[0].lon).then((e=>{k(o(e.list))}))}));const r=document.getElementById("slide-left"),a=document.getElementById("slide-right");r.style.opacity=0,r.style.pointerEvents="none",a.style.opacity=0,a.style.pointerEvents="none",document.getElementById("slide-left").pointerEvents="none",document.getElementById("slide-right").pointerEvents="none",document.querySelector(".slide-container").style.opacity=1}),500))})),x.addEventListener("click",(function(){document.querySelector(".daily-weather-container").remove();const n=document.getElementById("city-name").innerText;v&&(v=!1,document.getElementById("daily").style.color="rgb(208, 208, 208)",document.getElementById("hourly").style.color="white",document.querySelector(".slide-container").style.opacity=0,setTimeout((function(){e(n).then((e=>{T(e[0].name),t(e[0].lat,e[0].lon).then((e=>{const t=l(e);X(r(e.list),t)}))})),document.querySelector(".nav-point-container").style.opacity=1;const o=document.getElementById("slide-left"),a=document.getElementById("slide-right");o.style.opacity=1,o.style.pointerEvents="auto",a.style.opacity=1,a.style.pointerEvents="auto  ",document.getElementById("slide-left").pointerEvents="auto",document.getElementById("slide-right").pointerEvents="auto",document.querySelector(".slide-container").style.opacity=1}),500))})),e("Amsterdam").then((e=>{T(e[0].name),console.log(e),t(e[0].lat,e[0].lon).then((e=>{const t=n(e.list[0]);q(t.temp,t.weather,t.precip,t.humidity,t.wind,t.icon),S(t.weather),k(o(e.list)),console.log(e)}))}))})();